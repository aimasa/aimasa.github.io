---
title: 了解二维码(一):二维码的组成部分解释与介绍
copyright: true
date: 2019-01-21 08:55:09
categories:
- QR
- 了解二维码
- 了解二维码(一):二维码的组成部分解释与介绍
tags: 
- QR
---
# QR图形介绍 
**********************************************************
>  二维码一共有40个尺寸。官方叫版本Version。Version 1是21 x 21的矩阵，Version 2是 25 x 25的矩阵，Version 3是29的尺寸，每增加一个version，就会增加4的尺寸，公式是：** (V-1)x4 + 21（V是版本号）** 最高Version 40，(40-1)*4+21 = 177，所以最高是177 x 177 的正方形。
<!--more-->
 
<center>{% qnimg QR_infor/QR_area.png %}</center>

### 功能图形起到定位的作用：
[参考博客链接](https://www.cnblogs.com/magicsoar/p/4483032.html "参考二维码各部分名称的博客链接")，[参考博客链接](https://blog.csdn.net/kelindame/article/details/45155185 "参考二维码各部分详细介绍")

* 位置探测图形：最大的正方形就是位置探测图形（由三个黑白相间的大正方形嵌套组成，分别位于二维码左上角、右上角、左下角，目的是为了确定二维码的大小和位置。）这个图形的大小是固定的，不会因为二维码的版本而改变。(它的旁边还有八个加七个的由白块组成的白边，为了更好的定位而存在的)

<center>{% qnimg QR_infor/position.jpg %}</center>

* 定位图形：连接着位置探测图形的有规律的黑白相间的那条线（由**两条**黑白相间的直线组成，便于确定二维码的角度，纠正扭曲。）** 定位符是因为二维码有40个版本尺寸,当尺寸过大后需要有根标准线，不然扫描的时候可能会扫歪。 **，它的长度很容易计算出来，一共两条线，用二维码的长度减掉两个位置探测图形的长度就可以得出每条线的长度了。


* 校正图形：和位置探测图形比起来比较小，和定位图形的黑白相间的小正方形比起来要大的正方形（仅在版本2以上存在，由三个黑白相间的小正方形嵌套组成，便于确定中心，纠正扭曲。）** 每个版本的存储数据容量不一样,版本越高就意味着数据容量越大，纠错能力越强 **这个图形的大小是固定的，不会因为二维码的版本而改变。

<center>{% qnimg QR_infor/position2.jpg %}</center>

Alignment Patterns(对齐模式)：也是用于定位，只有version2以上才有用。



### 数据区记录了具体的数据信息，纠错信息与版本信息：

* 数据和纠错码：把数据码和纠错码的各个8位一组的十进制数（codewords）交替放在一起（跟我的理解是一样的，把数据分组，然后每组数据后面跟一个纠错码），所以就算有图片在二维码中间，二维码还是能扫描出记录在里面的内容(记录了数据信息和相应的纠错码，纠错码的存在使得当二维码的数据出现允许范围内的错误时，也可以正确解码。)** 存储容错级别L(7%),M(15%),Q(25%),R(35%) **

* 版本信息：就是记录二维码的规格(仅在**版本7以上**存在，记录具体的版本信息。)需要预留两块3 x 6的区域存放一些版本信息

* 格式信息：记录使用的数据掩码和纠错等级，和额外的自身BCH容错码。一条格式信息有15个bit，还有一条格式信息是这条信息的副本，为了防止格式信息被破坏。
 
* Dark Module：这是二维码的标志，每个二维码都有。

<center>{% qnimg QR_infor/DarkModule.png %}</center>

此外二维码的外围还留有一圈空白区，主要是为了便于识别而存在。其中在位置探测图形周围有一圈白边（一个单位宽），这是分隔符，位于每个定位标识和编码区域之间用于区分。

### 纠错码和编码信息

除了上述说的这些外，就还只有纠错码和编码了。

那么，QR是怎么对数据码加上纠错码的？首先，我们需要对数据码进行分组，也就是分成不同的Block，然后对各个Block进行纠错编码。

- Number of Error Code Correction Blocks ：需要分多少个块。

- Error Correction Code Per Blocks：每一个块中的code个数，所谓的code的个数，也就是有多少个8bits的字节。

[参考博文](https://blog.csdn.net/u012611878/article/details/53167009)

[参考博文](https://coolshell.cn/articles/10590.html)

QR码中，不同版本不同纠错级别都有相对应的数据存储容量，输入的字符越多，那相对应的QR码就要越大。

以下这个表是根据版本以及纠错级别对应的最佳的输入的数据的字符个数

<center>{% qnimg QR_infor/QR_data.png %}</center>

